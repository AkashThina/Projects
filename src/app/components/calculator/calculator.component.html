<div class="container">
    <form [formGroup]="calculatorForm" (submit)="onSubmit()">
        <div class="row mt-4 g-3">
            <div class="col-12 col-md-6 col-lg-3">
                <input type="text" class="form-control" (keypress)="numberOnly($event)"
                    [ngClass]="{
                        'is-invalid': calculatorForm.get('initialAmount')?.invalid && (calculatorForm.get('initialAmount')?.dirty || calculatorForm.get('initialAmount')?.touched),
                        'is-valid': calculatorForm.get('initialAmount')?.valid && (calculatorForm.get('initialAmount')?.dirty || calculatorForm.get('initialAmount')?.touched)}"
                    formControlName="initialAmount" placeholder="Initial Amount (₹)">

                <div *ngIf="calculatorForm.get('initialAmount')?.errors?.['required'] && (calculatorForm.get('initialAmount')?.touched || calculatorForm.get('initialAmount')?.dirty)"
                    class="invalid-feedback text-danger">
                    Initial Amount is required
                </div>
            </div>


            <!-- Number of Years -->
            <div class="col-12 col-md-6 col-lg-3">
                <input type="text" class="form-control" min="1" formControlName="numberOfYears"
                    (keypress)="numberOnly($event)" placeholder="Number of Years"
                    [ngClass]="{
                        'is-invalid': calculatorForm.get('numberOfYears')?.invalid && (calculatorForm.get('numberOfYears')?.touched || calculatorForm.get('numberOfYears')?.dirty),
                        'is-valid': calculatorForm.get('numberOfYears')?.valid && (calculatorForm.get('numberOfYears')?.touched || calculatorForm.get('numberOfYears')?.dirty)}">
                <div class="invalid-feedback text-danger">
                    <div *ngIf="calculatorForm.get('numberOfYears')?.errors?.['required']">Number of Years is required
                    </div>
                    <div *ngIf="calculatorForm.get('numberOfYears')?.errors?.['min']">Must be at least 1 year</div>
                </div>

            </div>

            <!-- Step-Up Duration -->
            <div class="col-12 col-md-6 col-lg-3">
                <input type="text" class="form-control" min="1" formControlName="stepUpDuration"
                    (keypress)="numberOnly($event)" placeholder="Step-Up Duration (Months)"
                    [ngClass]="{
                        'is-invalid': calculatorForm.get('stepUpDuration')?.invalid && (calculatorForm.get('stepUpDuration')?.touched || calculatorForm.get('stepUpDuration')?.dirty),
                        'is-valid': calculatorForm.get('stepUpDuration')?.valid && (calculatorForm.get('stepUpDuration')?.touched || calculatorForm.get('stepUpDuration')?.dirty)}">
                <div class="invalid-feedback text-danger">
                    <div *ngIf="calculatorForm.get('stepUpDuration')?.errors?.['required']">Step-Up Duration is required
                    </div>
                    <div *ngIf="calculatorForm.get('stepUpDuration')?.errors?.['min']">Must be at least 1 month</div>
                </div>

            </div>

            <!-- Step-Up Value -->
            <div class="col-12 col-md-6 col-lg-3">
                <input type="text" class="form-control" min="0" formControlName="stepUpValue"
                    (keypress)="numberOnly($event)" placeholder="Step-Up Value (₹)"
                    [ngClass]="{
                        'is-invalid': calculatorForm.get('stepUpValue')?.invalid && (calculatorForm.get('stepUpValue')?.touched || calculatorForm.get('stepUpValue')?.dirty),
                        'is-valid': calculatorForm.get('stepUpValue')?.valid && (calculatorForm.get('stepUpValue')?.touched || calculatorForm.get('stepUpValue')?.dirty)}">
                <div class="invalid-feedback text-danger">
                    <div *ngIf="calculatorForm.get('stepUpValue')?.errors?.['required']">Step-Up Value is required</div>
                    <div *ngIf="calculatorForm.get('stepUpValue')?.errors?.['min']">Must be at least ₹0</div>
                </div>

            </div>

        </div>

        <div class="mt-2 mb-5 project-links ">
            <button type="submit">Calculate</button>
            <button type="button" *ngIf="show">Download CSV</button>
            <button type="button" *ngIf="show">Download PDF</button>
        </div>
    </form>

    <div class="container">
        <table class="table table-bordered table-striped mt-4" *ngIf="tableData.length > 0">
            <thead class="table-light">
                <tr>
                    <th>S.No</th>
                    <th>Month - Year</th>
                    <th>Investment Amount (₹)</th>
                    <th>Cumulative Investment (₹)</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of tableData">
                    <td>{{ row.sNo }}</td>
                    <td>{{ row.displayMonth }}</td>
                    <td>₹{{ row.amount}}</td>
                    <td>₹{{ row.cumulative }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>